"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[785],{18114:function(Ee,$,l){l.r($),l.d($,{default:function(){return Te}});var W=l(28152),C=l.n(W),J=l(13448),n=l.n(J),N=l(74815),m=l.n(N),Q=l(77117),y=l.n(Q),Z=l(39228);function q(c,r){return D.apply(this,arguments)}function D(){return D=m()(n()().mark(function c(r,s){return n()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",(0,Z.request)("/api/task/getAllTask",y()({method:"GET",params:y()({},r)},s||{})));case 1:case"end":return i.stop()}},c)})),D.apply(this,arguments)}function _(c,r){return j.apply(this,arguments)}function j(){return j=m()(n()().mark(function c(r,s){var a;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new FormData,a.append("taskId",r.task_id),a.append("createTime",r.create_time),a.append("mode",r.mode),a.append("model",r.model),a.append("status",r.status),a.append("pcapFile",r.pcap_file),t.abrupt("return",(0,Z.request)("/api/task/createTask",y()({method:"POST",data:a},s||{})));case 8:case"end":return t.stop()}},c)})),j.apply(this,arguments)}function ee(c,r){return b.apply(this,arguments)}function b(){return b=m()(n()().mark(function c(r,s){var a;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new FormData,r.taskIds.forEach(function(e){a.append("taskId",e)}),t.abrupt("return",(0,Z.request)("/api/task/deleteTask",y()({method:"POST",data:a},s||{})));case 3:case"end":return t.stop()}},c)})),b.apply(this,arguments)}function ae(c,r){return E.apply(this,arguments)}function E(){return E=m()(n()().mark(function c(r,s){var a;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new FormData,r.taskIds.forEach(function(e){a.append("taskId",e)}),t.abrupt("return",(0,Z.request)("/api/task/startTask",y()({method:"POST",data:a},s||{})));case 3:case"end":return t.stop()}},c)})),E.apply(this,arguments)}function re(c,r){return R.apply(this,arguments)}function R(){return R=m()(n()().mark(function c(r,s){var a;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=new FormData,r.taskIds.forEach(function(e){a.append("taskId",e)}),t.abrupt("return",(0,Z.request)("/api/task/stopTask",y()({method:"POST",data:a},s||{})));case 3:case"end":return t.stop()}},c)})),R.apply(this,arguments)}var te=l(21897),ne=l(56341),se=l(51606),p=l(22796),ue=l(65937),x=l(43631),M=l(23967),S=l(50959),G=l(58534),le=l(36675),ie=l(85578),ce=l(57216),o=l(11527),de=function(r){return(0,o.jsx)(M.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u65B0\u5EFA\u4EFB\u52A1",open:r.addModalOpen,footer:null,onCancel:function(){r.onCancel()},children:(0,o.jsx)(G.A,{onFinish:r.onSubmit,children:(0,o.jsxs)(G.A.Group,{children:[(0,o.jsx)(le.Z,{width:"sm",options:[{label:"XGBoost(UEID\u805A\u5408)",value:0},{label:"XGBoost(Time\u805A\u5408)",value:1},{label:"Whisper(UEID\u805A\u5408)",value:2}],rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6A21\u578B"}],name:"model",label:"\u68C0\u6D4B\u6A21\u578B"}),(0,o.jsx)(ie.Z,{name:"mode",initialValue:0,hidden:!0}),(0,o.jsx)(ce.Z,{label:"\u4E0A\u4F20\u6D41\u91CF\u6587\u4EF6",name:"pcapFile",width:"md",max:1,rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u6D41\u91CF\u6587\u4EF6"}],fieldProps:{beforeUpload:function(){return!1}}})]})})})},oe=de,pe=l(62950),fe=l(5726),he=l.n(fe),me=function(){var c=m()(n()().mark(function r(s){var a;return n()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=p.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),s.mode!=0){t.next=15;break}return t.prev=2,t.next=5,_({task_id:(0,pe.Z)(),create_time:he()().format("YYYY-MM-DD HH:mm:ss"),mode:s.mode,model:s.model,status:0,pcap_file:s.pcapFile[0].originFileObj});case 5:return a(),p.ZP.success("\u6210\u529F\u521B\u5EFA\u4EFB\u52A1"),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t.catch(2),a(),p.ZP.error("\u521B\u5EFA\u5931\u8D25, \u8BF7\u91CD\u8BD5!"),t.abrupt("return",!1);case 15:case"end":return t.stop()}},r,null,[[2,10]])}));return function(s){return c.apply(this,arguments)}}(),ve=function(){var c=m()(n()().mark(function r(s){var a,i;return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.ZP.loading("\u6B63\u5728\u5220\u9664"),s){e.next=3;break}return e.abrupt("return",!0);case 3:if(e.prev=3,i=s.filter(function(T){return[0,5,100,200].includes(T.status)}),i.length!==0){e.next=9;break}return a(),p.ZP.error("\u9009\u4E2D\u7684\u4EFB\u52A1\u4E2D\u6CA1\u6709\u53EF\u5220\u9664\u7684\u4EFB\u52A1"),e.abrupt("return",!1);case 9:return e.next=11,ee({taskIds:i.map(function(T){return T.task_id})});case 11:return a(),p.ZP.success("\u5220\u9664\u6210\u529F"),e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(3),a(),p.ZP.error("\u5220\u9664\u5931\u8D25, \u8BF7\u91CD\u8BD5"),e.abrupt("return",!1);case 21:case"end":return e.stop()}},r,null,[[3,16]])}));return function(s){return c.apply(this,arguments)}}(),B=function(){var c=m()(n()().mark(function r(s){var a,i;return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.ZP.loading("\u6B63\u5728\u542F\u52A8"),s){e.next=3;break}return e.abrupt("return",!0);case 3:if(e.prev=3,i=s.filter(function(T){return[0,5,100,200].includes(T.status)}),i.length!==0){e.next=9;break}return a(),p.ZP.error("\u9009\u4E2D\u7684\u4EFB\u52A1\u4E2D\u6CA1\u6709\u53EF\u542F\u52A8\u7684\u4EFB\u52A1"),e.abrupt("return",!1);case 9:return e.next=11,ae({taskIds:i.map(function(T){return T.task_id})});case 11:return a(),p.ZP.success("\u542F\u52A8\u6210\u529F"),e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(3),a(),p.ZP.error("\u542F\u52A8\u5931\u8D25, \u8BF7\u91CD\u8BD5"),e.abrupt("return",!1);case 21:case"end":return e.stop()}},r,null,[[3,16]])}));return function(s){return c.apply(this,arguments)}}(),ke=function(){var c=m()(n()().mark(function r(s){var a,i;return n()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=p.ZP.loading("\u6B63\u5728\u505C\u6B62"),s){e.next=3;break}return e.abrupt("return",!0);case 3:if(e.prev=3,i=s.filter(function(T){return[1,2,3,4].includes(T.status)}),i.length!==0){e.next=9;break}return a(),p.ZP.error("\u9009\u4E2D\u7684\u4EFB\u52A1\u4E2D\u6CA1\u6709\u53EF\u505C\u6B62\u7684\u4EFB\u52A1"),e.abrupt("return",!1);case 9:return e.next=11,re({taskIds:i.map(function(T){return T.task_id})});case 11:return a(),p.ZP.success("\u5DF2\u505C\u6B62"),e.abrupt("return",!0);case 16:return e.prev=16,e.t0=e.catch(3),a(),p.ZP.error("\u505C\u6B62\u5931\u8D25, \u8BF7\u91CD\u8BD5"),e.abrupt("return",!1);case 21:case"end":return e.stop()}},r,null,[[3,16]])}));return function(s){return c.apply(this,arguments)}}(),ge=function(){var r=(0,S.useState)(!1),s=C()(r,2),a=s[0],i=s[1],t=(0,S.useState)(!1),e=C()(t,2),T=e[0],Re=e[1],v=(0,S.useRef)(),Se=(0,S.useState)(!0),U=C()(Se,2),K=U[0],A=U[1],we=(0,S.useState)(!1),z=C()(we,2),Ce=z[0],O=z[1],ye=(0,S.useState)([]),X=C()(ye,2),I=X[0],Fe=X[1],Pe=(0,S.useState)([]),Y=C()(Pe,2),Ze=Y[0],V=Y[1],H=function(d){O(!0),Fe(d)},Ae=function(){var h=m()(n()().mark(function d(){return n()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,ve(I);case 2:V([]),v.current?v.current.reload():p.ZP.error("\u4EFB\u52A1\u5DF2\u7ECF\u5220\u9664"),O(!1);case 5:case"end":return f.stop()}},d)}));return function(){return h.apply(this,arguments)}}(),Ie=function(){O(!1)};(0,S.useEffect)(function(){var h=setInterval(function(){v.current&&K&&v.current.reload()},1e3);return function(){return clearInterval(h)}},[K]);var De=function(d){console.log("selectedRowKeys changed: ",d),V(d)},je=[{title:"\u4EFB\u52A1ID",dataIndex:"task_id",ellipsis:!0},{title:"\u4EFB\u52A1\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time",valueType:"dateTime"},{title:"\u68C0\u6D4B\u5F00\u59CB\u65F6\u95F4",dataIndex:"start_time",valueType:"dateTime"},{title:"\u68C0\u6D4B\u7ED3\u675F\u65F6\u95F4",dataIndex:"end_time",valueType:"dateTime"},{title:"\u68C0\u6D4B\u6A21\u578B",dataIndex:"model",renderText:function(d){return d===0?"XGBoost(UEID\u805A\u5408)":d===1?"XGBoost(\u65F6\u95F4\u7247\u805A\u5408)":"Whisper(UEID\u805A\u5408)"}},{title:"\u68C0\u6D4B\u6587\u4EF6\u540D",dataIndex:"pcap_path",valueType:"textarea"},{title:"\u6B63\u5E38\u6D41\u91CF\u6570",dataIndex:"normal",valueType:"textarea",hideInTable:!0},{title:"\u5F02\u5E38\u6D41\u6570",dataIndex:"abnormal",valueType:"textarea"},{title:"\u603B\u6D41\u6570",dataIndex:"total",valueType:"textarea"},{title:"\u72B6\u6001",dataIndex:"status",filters:!0,onFilter:!0,valueEnum:{100:{text:"\u9519\u8BEF",status:"Error"},200:{text:"\u5DF2\u505C\u6B62",status:"Error"},0:{text:"\u672A\u5F00\u59CB",status:"Default"},1:{text:"\u5F85\u89E3\u6790",status:"Processing"},2:{text:"\u89E3\u6790\u4E2D",status:"Processing"},3:{text:"\u5F85\u68C0\u6D4B",status:"Processing"},4:{text:"\u68C0\u6D4B\u4E2D",status:"Processing"},5:{text:"\u68C0\u6D4B\u5B8C\u6210",status:"Success"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(d,u){var f=u.status===5||u.status===100||u.status===200,F=u.status===0,k=u.status===0||u.status===5||u.status===100||u.status===200,w=u.status===1||u.status===2||u.status===3||u.status===4;return[w&&(0,o.jsx)("a",{onClick:m()(n()().mark(function P(){return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,ke([u]);case 2:v.current?(v.current.reload(),A(!0)):p.ZP.error("\u4EFB\u52A1\u5DF2\u7ECF\u505C\u6B62");case 3:case"end":return g.stop()}},P)})),children:"\u505C\u6B62\u4EFB\u52A1"},"stopTask"),f&&(0,o.jsx)("a",{onClick:m()(n()().mark(function P(){return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,B([u]);case 2:v.current?(v.current.reload(),A(!0)):p.ZP.error("\u4EFB\u52A1\u5DF2\u7ECF\u542F\u52A8");case 3:case"end":return g.stop()}},P)})),children:"\u91CD\u65B0\u5F00\u59CB"},"restartTask"),F&&(0,o.jsx)("a",{onClick:m()(n()().mark(function P(){return n()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,B([u]);case 2:v.current?(v.current.reload(),A(!0)):p.ZP.error("\u4EFB\u52A1\u5DF2\u7ECF\u542F\u52A8");case 3:case"end":return g.stop()}},P)})),children:"\u5F00\u59CB\u4EFB\u52A1"},"startTask"),k&&(0,o.jsx)("a",{onClick:function(){H([u])},children:"\u5220\u9664\u4EFB\u52A1"},"deleteTask")]}}],be={selectedRowKeys:Ze,onChange:De};return(0,o.jsxs)(ne._z,{children:[(0,o.jsx)(se.Z,{headerTitle:"\u4EFB\u52A1\u5217\u8868",actionRef:v,rowKey:"task_id",search:!1,toolBarRender:function(){return[(0,o.jsxs)(ue.ZP,{type:"primary",onClick:function(){i(!0)},children:[(0,o.jsx)(te.Z,{})," \u65B0\u5EFA"]},"primary")]},request:function(){var h=m()(n()().mark(function d(u){var f;return n()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,q({current:u.current,pageSize:u.pageSize});case 2:return f=k.sent,f.success&&f.data?A(f.data.some(function(w){return[1,2,3,4].includes(w.status)})):A(!0),k.abrupt("return",{data:f.data,success:f.success});case 5:case"end":return k.stop()}},d)}));return function(d){return h.apply(this,arguments)}}(),columns:je,rowSelection:be,tableAlertRender:function(d){var u=d.selectedRowKeys,f=d.onCleanSelected;return(0,o.jsx)(x.Z,{size:24,children:(0,o.jsxs)("span",{children:["\u5DF2\u9009 ",u.length," \u9879",(0,o.jsx)("a",{style:{marginInlineStart:8},onClick:f,children:"\u53D6\u6D88\u9009\u62E9"})]})})},tableAlertOptionRender:function(d){var u=d.selectedRows,f=d.onCleanSelected;return console.log("tableAlertOptionRender"+u),(0,o.jsxs)(x.Z,{size:16,children:[(0,o.jsx)("a",{onClick:function(){H(u)},children:"\u6279\u91CF\u5220\u9664"}),(0,o.jsx)("a",{onClick:m()(n()().mark(function F(){return n()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,B(u);case 2:v.current?(v.current.reload(),f()):p.ZP.error("\u4EFB\u52A1\u5DF2\u7ECF\u542F\u52A8");case 3:case"end":return w.stop()}},F)})),children:"\u6279\u91CF\u542F\u52A8"})]})}}),(0,o.jsx)(M.Z,{title:"\u786E\u8BA4\u5220\u9664",open:Ce,onOk:function(){Ae()},onCancel:Ie,children:I.length===1?"\u662F\u5426\u5220\u9664\u4EFB\u52A1 ".concat(I[0].task_id,"?"):"\u662F\u5426\u5220\u9664 ".concat(I.length," \u4E2A\u4EFB\u52A1?")}),(0,o.jsx)(oe,{onSubmit:function(){var h=m()(n()().mark(function d(u){var f;return n()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,me(u);case 2:f=k.sent,f&&(i(!1),v.current&&v.current.reload());case 4:case"end":return k.stop()}},d)}));return function(d){return h.apply(this,arguments)}}(),onCancel:function(){i(!1)},addModalOpen:a})]})},Te=ge}}]);
