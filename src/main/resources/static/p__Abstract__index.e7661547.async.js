"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[186],{88935:function(Ta,z,a){a.r(z),a.d(z,{default:function(){return pa}});var K=a(13448),b=a.n(K),oa=a(74815),P=a.n(oa),ia=a(28152),M=a.n(ia),s=a(50959),aa=a(26514),O=a(44912),sa=a(90555),da=a(77117),C=a.n(da),$=a(86172),J=a(29617),Q=a(64479),U=a(79673),Y=a(96461),X=function(t,i){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(r[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(t);o<e.length;o++)i.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]]);return r},ca=(0,s.forwardRef)(function(t,i){var r=t.chartRef,e=t.style,o=e===void 0?{height:"inherit"}:e,x=t.className,l=t.loading,E=t.loadingTemplate,u=t.errorTemplate,m=X(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),h=(0,J.Z)($.cQ,m),v=h.chart,p=h.container;return(0,s.useEffect)(function(){(0,Q.J)(r,v.current)},[v.current]),(0,s.useImperativeHandle)(i,function(){return{getChart:function(){return v.current}}}),s.createElement(U.Z,{errorTemplate:u},l&&s.createElement(Y.Z,{loadingTemplate:E,theme:t.theme}),s.createElement("div",{className:x,style:o,ref:p}))}),ta=ca,ua=function(t,i){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(r[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(t);o<e.length;o++)i.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]]);return r},va=(0,s.forwardRef)(function(t,i){var r=t.chartRef,e=t.style,o=e===void 0?{height:"inherit"}:e,x=t.className,l=t.loading,E=t.loadingTemplate,u=t.errorTemplate,m=ua(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),h=(0,J.Z)($.m,m),v=h.chart,p=h.container;return(0,s.useEffect)(function(){(0,Q.J)(r,v.current)},[v.current]),(0,s.useImperativeHandle)(i,function(){return{getChart:function(){return v.current}}}),s.createElement(U.Z,{errorTemplate:u},l&&s.createElement(Y.Z,{loadingTemplate:E,theme:t.theme}),s.createElement("div",{className:x,style:o,ref:p}))}),fa=va,ea=a(71028),f=a(82986),g={iconGroup:"iconGroup___rbOAz",anticon:"anticon___m9AQs",rankingList:"rankingList___asZOt",rankingItemNumber:"rankingItemNumber___NXkt8",active:"active___tdvn8",rankingItemTitle:"rankingItemTitle___k9bYh",salesExtra:"salesExtra___pfEdc",currentDate:"currentDate___lBNhN",salesCard:"salesCard___F4IFi",salesBar:"salesBar___C1ow5",salesRank:"salesRank___DbMiZ",salesCardExtra:"salesCardExtra____DaTQ",salesTypeRadio:"salesTypeRadio___gwAxE",offlineCard:"offlineCard___jAxcn",trendText:"trendText___CMv7L",rankingTitle:"rankingTitle___LHR7c",salesExtraWrap:"salesExtraWrap___l3DEn"},n=a(11527),L={xs:24,sm:12,md:12,lg:12,xl:6,style:{marginBottom:24}},ma=function(i){for(var r,e,o,x=i.loading,l=i.introduceData,E=new Date,u=[],m=6;m>=0;m--){var h=new Date(E.getFullYear(),E.getMonth(),E.getDate()-m),v=h.toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"});u.push(v.split("/").join("-"))}var p=u.map(function(d){var c=l.completedTask.find(function(j){return j.dateByDay===d});return c?c.completeTaskByDay:0}),R=u.map(function(d){var c=l.n2Normal.find(function(j){return j.dateByDay===d});return c?c.n2NormalByDay:0}),N=u.map(function(d){var c=l.n2Abnormal.find(function(j){return j.dateByDay===d});return c?c.n2AbnormalByDay:0}),S=l.completedTask.reduce(function(d,c){return d+c.completeTaskByDay},0),B=l.n2Normal.reduce(function(d,c){return d+c.n2NormalByDay},0),V=l.n2Abnormal.reduce(function(d,c){return d+c.n2AbnormalByDay},0),k=l.completedTask.find(function(d){return d.dateByDay===u[6]}),G=l.n2Abnormal.find(function(d){return d.dateByDay===u[6]}),q=l.n2Normal.find(function(d){return d.dateByDay===u[6]});return(0,n.jsxs)(aa.Z,{gutter:24,children:[(0,n.jsx)(O.Z,C()(C()({},L),{},{children:(0,n.jsx)(f.th,{bordered:!1,title:"\u6D3B\u8DC3\u4EFB\u52A1",loading:x,total:function(){var c,j;return(l==null||(c=l.activeTask)===null||c===void 0?void 0:c.offline)+(l==null||(j=l.activeTask)===null||j===void 0?void 0:j.online)},footer:(0,n.jsxs)("div",{children:["\u79BB\u7EBF\u4EFB\u52A1: ",l==null||(r=l.activeTask)===null||r===void 0?void 0:r.offline]}),contentHeight:46,children:(0,n.jsx)(ta,{height:46,data:[l==null||(e=l.activeTask)===null||e===void 0?void 0:e.online,l==null||(o=l.activeTask)===null||o===void 0?void 0:o.offline]})})})),(0,n.jsx)(O.Z,C()(C()({},L),{},{children:(0,n.jsx)(f.th,{bordered:!1,loading:x,title:"\u5DF2\u5B8C\u6210\u4EFB\u52A1",total:function(){return S},footer:(0,n.jsx)(f.gN,{label:"\u4ECA\u65E5\u5B8C\u6210\u4EFB\u52A1\u6570",value:k?k.completeTaskByDay:0}),contentHeight:46,children:(0,n.jsx)(fa,{height:46,autoFit:!1,smooth:!1,data:p})})})),(0,n.jsx)(O.Z,C()(C()({},L),{},{children:(0,n.jsx)(f.th,{bordered:!1,loading:x,title:"N2\u53E3\u5F02\u5E38\u6570",color:"#E5EDFE",total:function(){return V},footer:(0,n.jsx)(f.gN,{label:"\u4ECA\u65E5\u5F02\u5E38\u6570",value:G?G.n2AbnormalByDay:0}),contentHeight:46,children:(0,n.jsx)(ta,{height:46,data:N})})})),(0,n.jsx)(O.Z,C()(C()({},L),{},{children:(0,n.jsx)(f.th,{loading:x,bordered:!1,title:"N2\u53E3\u6B63\u5E38\u7387",total:(B/(V+B)*100).toFixed(3)+"%",footer:(0,n.jsxs)("div",{style:{whiteSpace:"nowrap",overflow:"hidden"},children:["\u4ECA\u65E5\u6B63\u5E38\u6570",(0,n.jsx)("span",{className:g.trendText,children:q?q.n2NormalByDay:0})]}),contentHeight:46,children:(0,n.jsx)(ea.Z,{height:46,percent:B/(V+B),color:"#13C2C2"})})}))]})},na=ma,W=a(91561),ha=a(80704),ga=[{title:"\u5F02\u5E38\u6D41",dataIndex:"flow_id",valueType:"textarea"},{title:"\u5F52\u5C5E\u4EFB\u52A1",dataIndex:"task_id",valueType:"textarea"},{title:"\u5F02\u5E38\u65F6\u95F4",dataIndex:"latest_time",valueType:"dateTime"}],ra=function(i){var r=i.loading,e=i.abnormalEvent;return(0,n.jsx)(W.Z,{loading:r,bordered:!1,title:"\u5F02\u5E38\u4E8B\u4EF6",style:{height:"100%"},children:(0,n.jsx)(ha.Z,{rowKey:function(x){return x.flowId},size:"small",columns:ga,dataSource:e,pagination:{style:{marginBottom:0},pageSize:5,showSizeChanger:!1}})})},ya=ra,ja=a(4587),I=a.n(ja),y=function(t,i){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&i.indexOf(e)<0&&(r[e]=t[e]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(t);o<e.length;o++)i.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(t,e[o])&&(r[e[o]]=t[e[o]]);return r},T=(0,s.forwardRef)(function(t,i){var r=t.chartRef,e=t.style,o=e===void 0?{height:"inherit"}:e,x=t.className,l=t.loading,E=t.loadingTemplate,u=t.errorTemplate,m=y(t,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),h=(0,J.Z)($.by,m),v=h.chart,p=h.container;return(0,s.useEffect)(function(){(0,Q.J)(r,v.current)},[v.current]),(0,s.useImperativeHandle)(i,function(){return{getChart:function(){return v.current}}}),s.createElement(U.Z,{errorTemplate:u},l&&s.createElement(Y.Z,{loadingTemplate:E,theme:t.theme}),s.createElement("div",{className:x,style:o,ref:p}))}),A=T,F=function(i){var r=i.loading,e=i.salesPieData,o={loading:r,className:g.salesCard,bordered:!1,title:"\u5F02\u5E38\u6D41\u91CF\u7C7B\u522B\u5360\u6BD4",style:{height:"100%"}},x=e.reduce(function(u,m){return u+m.y},0);function l(u,m,h){var v=(0,$.Ux)(m,h),p=v.width,R=v.height,N=u/2,S=1;u<p&&(S=Math.min(Math.sqrt(Math.abs(Math.pow(N,2)/(Math.pow(p/2,2)+Math.pow(R,2)))),1));var B="width:".concat(u,"px;");return'<div style="'.concat(B,";font-size:").concat(S,"em;line-height:").concat(S<1?1:"inherit",';">').concat(m,"</div>")}var E={height:350,radius:.8,innerRadius:.6,angleField:"y",colorField:"x",data:e,legend:{position:"right"},label:{formatter:function(m,h){return"".concat(h._origin.x,": ").concat(I()(h._origin.y).format("0,0"))}},statistic:{title:{offsetY:-4,customHtml:function(m,h,v){var p=m.getBoundingClientRect(),R=p.width,N=p.height,S=Math.sqrt(Math.pow(R/2,2)+Math.pow(N/2,2)),B=v?v.type:"\u603B\u8BA1";return l(S,B,{fontSize:28})}},content:{offsetY:4,style:{fontSize:"20px"},customHtml:function(m,h,v,p){var R=m.getBoundingClientRect(),N=R.width,S="".concat(I()(x).format("0,0"));return l(N,S,{fontSize:20})}}}};return(0,n.jsx)(W.Z,C()(C()({},o),{},{children:(0,n.jsx)("div",{children:(0,n.jsx)(A,C()({},E))})}))},H=F,Z=a(39228);function D(){return w.apply(this,arguments)}function w(){return w=P()(b()().mark(function t(){return b()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,Z.request)("/api/abstract/getAllAbstract",{method:"GET"}));case 1:case"end":return r.stop()}},t)})),w.apply(this,arguments)}var la=a(61043),xa=function(){var i=(0,s.useState)(!0),r=M()(i,2),e=r[0],o=r[1],x=(0,s.useState)("all"),l=M()(x,2),E=l[0],u=l[1],m=(0,s.useState)({abnormalEvent:[],abnormalFlowBinary:{abnormal:0,normal:0},abnormalFlowMulti:{abnormal:0,normal:0},introduce:{activeTask:{online:0,offline:0},completedTask:[],n2Abnormal:[],n2Normal:[]}}),h=M()(m,2),v=h[0],p=h[1],R=(0,s.useState)([]),N=M()(R,2),S=N[0],B=N[1];(0,s.useEffect)(function(){var k=function(){var G=P()(b()().mark(function q(){var d,c,j;return b()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,D();case 2:j=_.sent,p(j.data),B([{x:"\u6B63\u5E38\u6D41\u91CF",y:(d=j.data)===null||d===void 0||(d=d.abnormalFlowBinary)===null||d===void 0?void 0:d.normal},{x:"\u5F02\u5E38\u6D41\u91CF",y:(c=j.data)===null||c===void 0||(c=c.abnormalFlowBinary)===null||c===void 0?void 0:c.abnormal}]);case 5:case"end":return _.stop()}},q)}));return function(){return G.apply(this,arguments)}}();o(!1),k()},[]);var V=function(G){u(G.target.value)};return e?(0,n.jsx)(la.Z,{}):(0,n.jsx)(sa.f,{children:(0,n.jsxs)(n.Fragment,{children:[v.introduce&&(0,n.jsx)(s.Suspense,{fallback:(0,n.jsx)(la.Z,{}),children:(0,n.jsx)(na,{loading:!1,introduceData:v.introduce})}),(0,n.jsxs)(aa.Z,{gutter:24,style:{marginTop:24},children:[(0,n.jsx)(O.Z,{xl:12,lg:24,md:24,sm:24,xs:24,children:(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(H,{salesType:E,loading:e,salesPieData:S,handleChangeSalesType:V})})}),(0,n.jsx)(O.Z,{xl:12,lg:24,md:24,sm:24,xs:24,children:(0,n.jsx)(s.Suspense,{fallback:null,children:(0,n.jsx)(ya,{loading:e,abnormalEvent:v.abnormalEvent})})})]})]})})},pa=xa},82986:function(Ta,z,a){a.d(z,{th:function(){return na},gN:function(){return ra}});var K=a(4587),b=a.n(K),oa=a(77117),P=a.n(oa),ia=a(95530),M=a.n(ia),s=a(15033),aa=a.n(s),O=a(96345),sa=a.n(O),da=a(90696),C=a.n(da),$=a(13762),J=a.n($),Q=a(41206),U=a.n(Q),Y=a(21320),X=a.n(Y),ca=a(27566),ta=a.n(ca),ua=a(91561),va=a(50959),fa=a(84875),ea=a.n(fa),f={chartCard:"chartCard___Av2T0",chartTop:"chartTop___grfLn",chartTopMargin:"chartTopMargin___Xj8Au",chartTopHasMargin:"chartTopHasMargin___QS9qG",metaWrap:"metaWrap___lz5A8",avatar:"avatar___gbF2e",meta:"meta___GZu1Z",action:"action___wwgdt",total:"total___ufedL",content:"content___NAdAv",contentFixed:"contentFixed___Uz4Ki",footer:"footer___Jwelq",footerMargin:"footerMargin___pCXwM"},g=a(11527),n=["loading"],L=function(y){if(!y&&y!==0)return null;var T;switch(ta()(y)){case"undefined":T=null;break;case"function":T=(0,g.jsx)("div",{className:f.total,children:y()});break;default:T=(0,g.jsx)("div",{className:f.total,children:y})}return T},ma=function(I){J()(T,I);var y=U()(T);function T(){var A;aa()(this,T);for(var F=arguments.length,H=new Array(F),Z=0;Z<F;Z++)H[Z]=arguments[Z];return A=y.call.apply(y,[this].concat(H)),X()(C()(A),"renderContent",function(){var D=A.props,w=D.contentHeight,la=D.title,xa=D.avatar,pa=D.action,t=D.total,i=D.footer,r=D.children,e=D.loading;return e?!1:(0,g.jsxs)("div",{className:f.chartCard,children:[(0,g.jsxs)("div",{className:ea()(f.chartTop,X()({},f.chartTopMargin,!r&&!i)),children:[(0,g.jsx)("div",{className:f.avatar,children:xa}),(0,g.jsxs)("div",{className:f.metaWrap,children:[(0,g.jsxs)("div",{className:f.meta,children:[(0,g.jsx)("span",{className:f.title,children:la}),(0,g.jsx)("span",{className:f.action,children:pa})]}),L(t)]})]}),r&&(0,g.jsx)("div",{className:f.content,style:{height:w||"auto"},children:(0,g.jsx)("div",{className:w&&f.contentFixed,children:r})}),i&&(0,g.jsx)("div",{className:ea()(f.footer,X()({},f.footerMargin,!r)),children:i})]})}),A}return sa()(T,[{key:"render",value:function(){var F=this.props,H=F.loading,Z=H===void 0?!1:H,D=M()(F,n);return(0,g.jsx)(ua.Z,P()(P()({loading:Z,bodyStyle:{padding:"20px 24px 8px 24px"}},D),{},{children:this.renderContent()}))}}]),T}(va.Component),na=ma,W={field:"field___Lyz1M",label:"label___vAFvH",number:"number___r3p1C"},ha=["label","value"],ga=function(y){var T=y.label,A=y.value,F=M()(y,ha);return(0,g.jsxs)("div",P()(P()({className:W.field},F),{},{children:[(0,g.jsx)("span",{className:W.label,children:T}),(0,g.jsx)("span",{className:W.number,children:A})]}))},ra=ga,ya=function(y){return"\xA5 ".concat(b()(y).format("0,0"))},ja={yuan:ya,ChartCard:na,Field:ra}},61043:function(Ta,z,a){var K=a(31337),b=a(11527);z.Z=function(){return(0,b.jsx)("div",{style:{paddingTop:100,textAlign:"center"},children:(0,b.jsx)(K.Z,{size:"large"})})}}}]);
